<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layout/salesLayout}">
<head>
<meta charset="UTF-8">
<title>Project/Main</title>
<link href="/metahaus/css/project/market_product_grid.css" rel="stylesheet" type="text/css" />
<link href="/metahaus/css/project/market_nav.css" rel="stylesheet" type="text/css" />
<link href="/metahaus/css/project/market_page_bar.css" rel="stylesheet" type="text/css" />
</head>
<body>
	<div layout:fragment="content">
	<!-- Main view -->
	<div class="view">
		<nav>
			<!-- category combo -->
			<div class="selectBox">
				<p>PROJECT MARKET&ensp;
					<span th:if="${param.category1!=null}" th:text="'&rang;&ensp;'+${param.category1}"></span>
				</p>
				<select name="category2_pj" class="select">
					<option disabled selected>카테고리 선택하기</option>
					<option value="메타버스 맵">메타버스 맵</option>
					<option value="메타버스 에셋">메타버스 에셋</option>
					<option value="홍보/이벤트">홍보/이벤트</option>
					<option value="기획/구축">기획/구축</option>
				</select>
				<span class="icoArrow"></span>
			</div>	
			<!-- search bar -->
			<div class="search_bar">
				<input type="text" placeholder="search" class="search_content">
				<button type="submit" class="search_btn">
					<img src="/metahaus/images/search_icon.png" class="btn_image">
				</button>
			</div>
		</nav>

		<!-- Product grid -->
			<table class="products">
				<thead>
					<tr>
						<th colspan="4" class="sort_pj">
							<a class="sort_pj_tag">최근 등록순</a>
							<span>|</span>
							<a class="sort_pj_tag">가격 낮은순</a>
							<span>|</span>
							<a class="sort_pj_tag">가격 높은순</a>
							<span>|</span>
							<a class="sort_pj_tag">인기순</a>
						</th>
					</tr>
				</thead>			
			<tbody>
			 <tr th:each="project, i:${projectlist}"  th:if="${i.index%4==0}">
				<!-- Product1 -->
					<td th:if="${i.index < i.size}" >
						<div class="product">
							<div class="product_img_cover">
								<img class="product_img" th:if="${projectlist[i.index].thumbnail != null}"
									 th:src="@{/upload/project_thumbnail_img/}+${projectlist[i.index].thumbnail}"/>
							</div>
							<div class="product_info">
								<!-- 별점 -->
								<div class="reviewer_star_rating">
									<div class="star-ratings">
										<div class="star-ratings-fill space-x-2 text-lg"
									    :style="{width: ratingToPercent + '%'}">
											<span>★</span><span>★</span><span>★</span><span>★</span>
										</div>
										<div class="star-ratings-base space-x-2 text-lg">
											<span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
										</div>
									</div>
									<span>&ensp;(37)</span>
								</div>								
								<a th:text="${projectlist[i.index].title}" 
									th:href="@{/project/detail(projectNum=${projectlist[i.index].projectId})}" 
									class="product_title"></a>
								<span th:text="${projectlist[i.index].creatorId}" class="product_seller"></span> 
<!-- 								<span th:text="${projectlist[i.index].price}+원" class="product_price"></span>
 -->							</div>
						</div>
					</td>
				<!-- Product2 -->
					<td th:if="${i.index < i.size}" >
						<div class="product">
							<div class="product_img_cover">
								<img class="product_img" th:if="${projectlist[i.index+1].thumbnail != null}"
									 th:src="@{/upload/project_thumbnail_img/}+${projectlist[i.index+1].thumbnail}"/>
							</div>
							<div class="product_info">
								<!-- 별점 -->
								<div class="reviewer_star_rating">
									<div class="star-ratings">
										<div class="star-ratings-fill space-x-2 text-lg"
									    :style="{width: ratingToPercent + '%'}">
											<span>★</span><span>★</span><span>★</span><span>★</span>
										</div>
										<div class="star-ratings-base space-x-2 text-lg">
											<span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
										</div>
									</div>
									<span>&ensp;(37)</span>
								</div>								
								<a th:text="${projectlist[i.index+1].title}" 
									th:href="@{/project/detail(projectNum=${projectlist[i.index+1].projectId})}" 
									class="product_title"></a>
								<span th:text="${projectlist[i.index+1].creatorId}" class="product_seller"></span> 
								<!-- <span th:text="${projectlist[i.index+1].price}+원" class="product_price"></span> -->
							</div>
						</div>
					</td>
				<!-- Product3 -->
		 			<td th:if="${i.index < i.size}" >
						<div class="product">
							<div class="product_img_cover">
								<img class="product_img" th:if="${projectlist[i.index+2].thumbnail != null}"
									 th:src="@{/upload/project_thumbnail_img/}+${projectlist[i.index+2].thumbnail}"/>
							</div>
							<div class="product_info">
								<!-- 별점 -->
								<div class="reviewer_star_rating">
									<div class="star-ratings">
										<div class="star-ratings-fill space-x-2 text-lg"
									    :style="{width: ratingToPercent + '%'}">
											<span>★</span><span>★</span><span>★</span><span>★</span>
										</div>
										<div class="star-ratings-base space-x-2 text-lg">
											<span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
										</div>
									</div>
									<span>&ensp;(37)</span>
								</div>								
								<a th:text="${projectlist[i.index+2].title}" 
									th:href="@{/project/detail(projectNum=${projectlist[i.index+2].projectId})}" 
									class="product_title"></a>
								<span th:text="${projectlist[i.index+2].creatorId}" class="product_seller"></span> 
								<!-- <span th:text="${projectlist[i.index+2].price}+원" class="product_price"></span> -->
							</div>
						</div>
					</td>
				<!-- Product4 -->
					 <td th:if="${i.index < i.size}" >
						<div class="product">
							<div class="product_img_cover">
								<img class="product_img" th:if="${projectlist[i.index+3].thumbnail != null}"
									 th:src="@{/upload/project_thumbnail_img/}+${projectlist[i.index+3].thumbnail}"/>
							</div>
							<div class="product_info">
								<!-- 별점 -->
								<div class="reviewer_star_rating">
									<div class="star-ratings">
										<div class="star-ratings-fill space-x-2 text-lg"
									    :style="{width: ratingToPercent + '%'}">
											<span>★</span><span>★</span><span>★</span><span>★</span>
										</div>
										<div class="star-ratings-base space-x-2 text-lg">
											<span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
										</div>
									</div>
									<span>&ensp;(37)</span>
								</div>								
								<a th:text="${projectlist[i.index+3].title}" 
									th:href="@{/project/detail(projectNum=${projectlist[i.index+3].projectId})}" 
									class="product_title"></a>
								<span th:text="${projectlist[i.index+3].creatorId}" class="product_seller"></span> 
								<!-- <span th:text="${projectlist[i.index+3].price}+원" class="product_price"></span> -->
							</div>
						</div>
					</td>
				 </tr>
			</tbody>
			</table>
			
			<!-- 페이지 번호 -->
<!--			<div class="page_wrap">
				<div class="page_nation" th:with="start=${(pjPage.number/maxPage)*maxPage + 1},
					 end=(${(pjPage.totalPages == 0) ? 1 : (start + (maxPage - 1) < pjPage.totalPages ? start + (maxPage - 1) : pjPage.totalPages)}),
					 nowPage=${pjPage.number+1}">
					<a class="arrow pprev" th:if="${start > 1}"  th:href="@{/project/main?pageNo=0}">&lang;&lang;</a>
					<a class="arrow prev" th:if="${start > 1}" th:href="@{/project/main(pageNo=${start - maxPage -1})}">&lang;</a>
					<th:block th:each= "page : ${#numbers.sequence(start, end)}">
						<a th:if="${page != nowPage}" 
						   th:href="@{/project/main(pageNo = ${page -1})}"
	           			   th:text="${page}"></a>
	           			<a th:if="${page == nowPage}" th:text="${page}" class="active"></a>
					</th:block>
					<a class="arrow next" th:if="${end < aPage.totalPages}"  th:href="@{/project/main(pageNo=${start + maxPage -1})}">&rang;</a>
					<a class="arrow nnext" th:if="${end < aPage.totalPages}"  th:href="@{/project/main(pageNo=${aPage.totalPages - 1})}">&rang;&rang;</a>
				</div> 
			</div> -->
		</div>

	</div><!-- layout:fragment -->	
</body>
</html>