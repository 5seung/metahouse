<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layout/salesLayout}">
<head>
<meta charset="UTF-8">

<title>project/detail</title>
<link href="/metahaus/css/asset/market_product_detail.css" rel="stylesheet" type="text/css" />
<link href="/metahaus/css/asset/market_product_detail_img.css" rel="stylesheet" type="text/css" /></head>
<body>
	<div layout:fragment="content" class="content">	
		<!-- product detail -->
		<div id="product_detail">
			<div>PROJECT&ensp;&rang;&ensp;
				<span th:text="${pjtInfo.category1}"></span>&ensp;&rang;&ensp;
				<span th:text="${pjtInfo.category2_pj}"></span>
			</div><br>
			<div id="main_title" th:text="${pjtInfo.title}"></div>
			<!-- 이미지 갤러리 -->
			<div id="photo_container">
				<div id="main_photo_box">
					<img th:src="@{/upload/project_thumbnail_img/}+${pjtInfo.project_thumbnail_img}" alt="photo" id="photo">
				</div>
 				<ul id="gallery" th:if="${projectImg != null}">
					<li>
						<img th:src="@{/upload/project_thumbnail_img/}+${pjtInfo.project_thumbnail_img}" alt="photo" id="photo">
					</li>
					<li th:each="Img:${projectImg}">
						<img th:src="@{/upload/project_thumbnail_img/}+${Img.project_store_filename}" alt="photo" id="photo">
					</li>
				</ul>
			</div>
			<!-- 컨텐츠 설명 -->
			<div class="sub_title" id="product_explain">서비스 설명</div>
			<div class="sub_content" th:utext="${pjtInfo.description}"></div>
			<!-- 가격 -->
			<div class="sub_title" id="price_explain">가격 정보</div>
			<div class="sub_content">
				<!-- 단일 패키지 -->
				<table class="price_table" id="one-level-price" 
						th:if="${pjtInfo.pjtSingle != null}">
					<tr>
						<th  colspan="2" th:text="'BASIC&ensp;&ensp;'+${pjtInfo.pjtSingle.price}+'원'"></th>
						<th></th>
					</tr>
					<tr> <!-- 첫번째 줄 시작 -->
					    <td>제목</td>
					    <td th:text="${pjtInfo.pjtSingle.pkg_title}"></td>
					</tr> <!-- 첫번째 줄 끝 -->
					<tr> <!-- 두번째 줄 시작 -->
					    <td>설명</td>
					    <td th:utext="${pjtInfo.pjtSingle.pkg_description}"></td>
					</tr>
					<tr> <!-- 세번째 줄 시작 -->
					    <td>작업일</td>
					    <td th:text="${pjtInfo.pjtSingle.workdays}+'일'"></td>
					</tr>
				</table> <!-- 단일패키지 끝 -->
				<!-- 3단 패키지 -->
				<table class="price_table" id="tri-level-price"
						th:if="${pjtInfo.pjtTriple != null}">
					<tr>
						<th></th>
						<th th:utext="'BASIC<br>'+${pjtInfo.pjtTriple.basic_price}+'원'"></th>
						<th th:utext="'ECONOMY<br>'+${pjtInfo.pjtTriple.economy_price}+'원'"></th>
						<th th:utext="'PREMIUM<br>'+${pjtInfo.pjtTriple.premium_price}+'원'"></th>
					</tr>
					<tr> <!-- 첫번째 줄 시작 -->
					    <td class="td1">제목</td>
					    <td class="td2" th:text="${pjtInfo.pjtTriple.basic_pkg_title}"></td>
					    <td class="td3" th:text="${pjtInfo.pjtTriple.economy_pkg_title}"></td>
					    <td class="td4" th:text="${pjtInfo.pjtTriple.premium_pkg_title}"></td>
					</tr> <!-- 첫번째 줄 끝 -->
					<tr> <!-- 두번째 줄 시작 -->
					    <td class="td1">설명</td>
					    <td class="td2" th:text="${pjtInfo.pjtTriple.basic_pkg_description}"></td>
					    <td class="td3" th:text="${pjtInfo.pjtTriple.economy_pkg_description}"></td>
					    <td class="td4" th:text="${pjtInfo.pjtTriple.premium_pkg_description}"></td>
					</tr>
					<tr> <!-- 세번째 줄 시작 -->
					    <td class="td1">작업일</td>
					    <td class="td2" th:text="${pjtInfo.pjtTriple.basic_workdays}+'일'"></td>
					    <td class="td3" th:text="${pjtInfo.pjtTriple.economy_workdays}+'일'"></td>
					    <td class="td4" th:text="${pjtInfo.pjtTriple.premium_workdays}+'일'"></td>
					</tr>
				</table> <!-- 3단 패키지 -->
			</div>
			<!-- 추가옵션 -->
			<div class="sub_title">추가옵션</div>
			<div class="sub_content">
				<table th:if="${projectOption != null}">
					<tr class="product_option" th:each="option : ${projectOption}">
						<td th:text="'&diams;&ensp;'+${option.add_option_name}"></td>
						<td th:text="${option.add_option_description}"></td>
						<td th:text="${option.add_option_price}+'원 추가'"></td>
					</tr>
				</table>
				<div th:unless="${projectOption != null}">
					<div>추가 옵션이 없습니다.</div>
				</div>
			</div>
            <!-- 취소 및 환불 규정 -->
            <div class="sub_title">취소 및 환불 규정</div>
            <div class="sub_content">
            	1. 기본 환불 규정<br/>
            	&ensp;1) 전문가와 의뢰인의 상호 협의하에 청약 철회 및 환불이 가능합니다.<br/>
            	&ensp;2) 작업이 완료된 이후 또는 자료, 프로그램 등 서비스가 제공된 이후에는 환불이 불가합니다.<br/><br/>
            	2. 판매자 책임 사유<br/>
            	&ensp;1) 판매자의 귀책사유로 당초 약정했던 서비스 미이행 혹은 보편적인 관점에서 심각하게 잘못 이행한 경우 결제한 금액에 대하여 전액 환불이 가능합니다.
            	<br/><br/>&lowast;추가 관련 규정은 당사 홈페이지의 최소 및 환불관련 규정을 참고해 주십시오.
            </div>
            <!-- 리뷰 -->
            <div class="sub_title">서비스 평가</div>
            <div class="sub_content">
	            <div class="review_summary">
	            	<div class="review_avg">4.0</div>
	            	<div>
						<!-- 별점 -->
						<div class="reviewer_star_rating">
							<div class="star-ratings">
								<div class="star-ratings-fill space-x-2 text-lg"
								    :style="{ width: ratingToPercent + '%' }">
									<span>★</span><span>★</span><span>★</span><span>★</span>
								</div>
								<div class="star-ratings-base space-x-2 text-lg">
									<span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
								</div>
							</div>
						</div>
	            		<!-- 리뷰갯수 -->
						<div>서비스 후기 N개</div>
	            	</div>
	            </div>
				<div>포토후기</div>
				
				<div>등록리뷰</div>
				<div>김**(kim9*****)</div>
				<div>상담 친절하게 잘해주셔요 결과물도 만족합니다~!</div>
				            
            </div>
            <!-- 게시글 신고 -->
            <div id="report">
				<img alt="신고아이콘" src="/metahaus/images/report_icon.png" id="report_img">
				<a>&ensp;게시글 신고하기</a>
			</div>
		</div>

		<!-- select_product_box -->
		<div id="select_product_box">
			<!-- select product -->
			<div id="select_product">
				<img alt="상품대표이미지" th:src="@{/upload/project_thumbnail_img/}+${pjtInfo.project_thumbnail_img}" id="represent_img">
				<div class="product_title" th:text="${pjtInfo.title}"></div>
				<div class="product_info" id="product_date" th:text="'작성일자:&ensp;'+${pjtInfo.project_date}"></div>
				<th:block th:if="${pjtInfo.pjtSingle != null}">
				<div class="product_info" id="product_price" th:text="${pjtInfo.pjtSingle.price}+'원&ensp;~'"></div>
				</th:block>
				<th:block th:if="${pjtInfo.pjtTriple != null}">
				<div class="product_info" id="product_price" th:text="${pjtInfo.pjtTriple.basic_price}+'원&ensp;~'"></div>
				</th:block>
			</div>
			<!-- seller profile -->
			<div id="seller_profile" th:onclick="|location.href='@{/user/profile(userId=${pjtInfo.creator_id})}'|">
				<div id="seller_img_box">
					<th:block th:if="${pjtInfo.creator.thumbnailStoreFilename !=null}">
					<img alt="프로필 이미지" th:src="@{/upload/project_thumbnail_img/}+${pjtInfo.creator.thumbnailStoreFilename}" id="seller_img">
					</th:block>
					<th:block th:if="${pjtInfo.creator.thumbnailStoreFilename == null}">
					<img alt="프로필 이미지" src="/metahaus/images/test_img.jpg" id="seller_img">
					</th:block>
				</div>
				<div id="seller_info">
					<div class="seller_name" th:text="${pjtInfo.creator_id}">
					<div class="seller_name" th:text="${pjtInfo.creator.userName}"></div>
					</div>
				</div>
			</div>
			<!-- buy button -->
			<div id="btn">
				<button class="button--small btn_custom">문의하기</button>
				<button class="button--small btn_custom"
				th:onclick="|location.href='@{/project/purchase(projectNum=${pjtInfo.project_id})}'|">구매하기</button>
			</div>
		</div>
	<script src="/metahaus/js/project/market_detail.js"></script>
	</div><!-- layout:fragment -->	
	

</body>
</html>